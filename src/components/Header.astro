---
import ThemeToggle from "./ThemeToggle.astro";

const url = new URL(Astro.request.url);
---

<script>
	import { toggleClass } from "@/util";

	document.addEventListener("DOMContentLoaded", () => {
		const { body } = document;
		const toggleMenuButton = document.getElementById("toggle-navigation-menu");
		let menuOpen = false;

		toggleMenuButton.addEventListener("click", () => {
			toggleClass(body, "menu-open");
			toggleClass(toggleMenuButton, "text-accent");
			menuOpen = !menuOpen;
			toggleMenuButton.setAttribute("aria-expanded", menuOpen.toString());
		});
	});
</script>

<header>
	<span>
		<a
			href="/"
			class="logo"
			aria-current={url.pathname === "/" ? "page" : false}
		>
			<svg
				version="1.1"
				id="Capa_1"
				xmlns="http://www.w3.org/2000/svg"
				xmlns:xlink="http://www.w3.org/1999/xlink"
				x="0px"
				y="0px"
				viewBox="0 0 256.614 256.614"
				style="enable-background:new 0 0 256.614 256.614;"
				xml:space="preserve"
			>
				<g>
					<g>
						<path
							style="fill:#723F1D;"
							d="M52.237,3.562c-12.013,4.65-22.141,22.882-30.904,31.781C9.862,46.993-10.636,62.427,6.683,78.097
			c12.527,11.333,32.244,8.127,42.313-3.386l30.619-51.032C82.532,8.75,65.75-1.67,52.237,3.562z"
						></path>
						<path
							style="fill:#B56F40;"
							d="M204.377,3.562c12.013,4.65,22.143,22.882,30.906,31.781
			c11.471,11.649,31.967,27.084,14.647,42.754c-12.525,11.333-32.244,8.127-42.313-3.386l-30.619-51.032
			C174.083,8.75,190.866-1.67,204.377,3.562z"
						></path>
					</g>
					<g>
						<path
							style="fill:#723F1D;"
							d="M129.207,204.691L91.11,191.174c-4.722,18.178-7.357,52.804,14.475,61.744
			C130.635,263.175,129.207,218.056,129.207,204.691z"
						></path>
						<path
							style="fill:#723F1D;"
							d="M133.547,204.691l38.097-13.517c4.723,18.178,7.358,52.804-14.474,61.744
			C132.119,263.175,133.547,218.056,133.547,204.691z"
						></path>
					</g>
					<g>
						<path
							style="fill:#B56F40;"
							d="M83.459,128.338c-10.783,5.069-16.553,24.756-18.141,35.164
			c-2.856,18.725,11.004,41.266,30.478,34.635l4.915-60.217C101.419,128.263,92.042,124.305,83.459,128.338z"
						></path>
						<path
							style="fill:#B56F40;"
							d="M179.293,128.338c10.785,5.069,16.556,24.756,18.142,35.164
			c2.857,18.725-11.003,41.266-30.477,34.635l-4.915-60.217C161.336,128.263,170.711,124.305,179.293,128.338z"
						></path>
					</g>
					<path
						style="fill:#E0C7A4;"
						d="M100.903,129.027c23.954-23.265,63.417-10.908,73.394,18.364
		c7.386,21.665,7.984,50.637-10.541,66.819c-19.244,16.813-52.811,12.247-68.541-6.363
		C77.283,186.632,80.967,148.391,100.903,129.027z"
					></path>
					<path
						style="fill:#C1A584;"
						d="M93.384,134.772c0,0,40.148,46.61,76.806,0H93.384z"></path>
					<path
						style="fill:#F2E2C9;"
						d="M211.456,47.945c-16.361-23.886-49.622-34.227-80.08-33.474
		c-30.456-0.753-63.718,9.588-80.079,33.474c-25.266,36.884,4.774,76.684,42.087,88.836c12.013,3.911,25.063,6.034,37.992,6.161
		c12.931-0.127,25.979-2.25,37.993-6.161C206.684,124.629,236.722,84.829,211.456,47.945z"
					></path>
					<g>
						<path
							style="fill:#EDA9A2;"
							d="M71.7,122.395c-6.615-3.224-10.702-10.201-7.269-21.139c5.813-18.514,35.644-20.244,38.315,1.54
			C105.029,121.41,83.996,128.385,71.7,122.395z"
						></path>
						<path
							style="fill:#EDA9A2;"
							d="M191.055,122.395c6.615-3.224,10.703-10.201,7.267-21.139c-5.812-18.514-35.642-20.244-38.314,1.54
			C157.726,121.41,178.759,128.385,191.055,122.395z"
						></path>
					</g>
					<path
						style="fill:#B56F40;"
						d="M92.737,47.007c36.548-3.632,51.13,50.509,14.257,59.534
		C67.727,116.156,46.515,51.601,92.737,47.007z"
					></path>
					<g>
						<g>
							<g>
								<circle style="fill:#FFFFFF;" cx="94.596" cy="84.529" r="16.895"
								></circle>
								<circle cx="94.596" cy="84.529" r="11.068"></circle>
							</g>
							<circle style="fill:#FFFFFF;" cx="102.428" cy="77.557" r="5.53"
							></circle>
						</g>
						<g>
							<g>
								<circle style="fill:#FFFFFF;" cx="167.48" cy="84.529" r="16.894"
								></circle>
								<circle cx="167.479" cy="84.529" r="11.068"></circle>
							</g>
							<circle style="fill:#FFFFFF;" cx="175.312" cy="77.557" r="5.53"
							></circle>
						</g>
					</g>
					<path
						d="M148.358,104.324c-3.809-10.558-30.06-10.636-33.889,0.008C109.061,119.375,153.301,118.055,148.358,104.324z
		 M138.547,89.72c-0.051-0.008-0.025-0.018,0-0.027C138.572,89.703,138.597,89.712,138.547,89.72z"
					></path>
					<path
						d="M148.797,117.32c-5.709,18.105-28.696,14.972-35.312-0.685c-1.436-3.396-6.375-0.47-4.952,2.895
		c4.05,9.583,13.251,15.802,23.616,16.179c10.703,0.389,19.081-7.037,22.18-16.863C155.445,115.308,149.908,113.806,148.797,117.32z
		"
					></path>
					<g>
						<path
							style="fill:#723F1D;"
							d="M84.891,40.262c6.168-0.182,12.645,4.588,5.445,11.18c-4.604,4.215-13.705,2.622-13.231-4.481
			C77.411,42.365,81.093,40.375,84.891,40.262z"
						></path>
						<path
							style="fill:#B56F40;"
							d="M177.866,40.262c-6.169-0.182-12.646,4.588-5.447,11.18c4.604,4.215,13.704,2.622,13.232-4.481
			C185.344,42.365,181.662,40.375,177.866,40.262z"
						></path>
					</g>
					<path
						style="fill:#F2E2C9;"
						d="M140.115,160.683c36.836,7.467,29.958,60.207-13.542,53.051
		C86.588,207.156,95.433,151.629,140.115,160.683z"
					></path>
				</g>
				<g> </g>
				<g> </g>
				<g> </g>
				<g> </g>
				<g> </g>
				<g> </g>
				<g> </g>
				<g> </g>
				<g> </g>
				<g> </g>
				<g> </g>
				<g> </g>
				<g> </g>
				<g> </g>
				<g> </g>
			</svg>
			<span>Evan Yang</span>
		</a>
		<nav id="navigation-menu" aria-label="Main">
			<a href="/" aria-current={url.pathname === "/" ? "page" : false}>Home</a>
			<a href="/about" aria-current={url.pathname === "/about" ? "page" : false}
				>About
			</a>
			<a href="/posts" aria-current={url.pathname === "/posts" ? "page" : false}
				>Posts
			</a>
		</nav>
	</span>
	<ThemeToggle />
	<button
		id="toggle-navigation-menu"
		type="button"
		aria-label="primary navigation"
		aria-expanded="false"
	>
		<svg
			fill="currentColor"
			viewBox="0 0 20 20"
			xmlns="http://www.w3.org/2000/svg"
		>
			<path
				fill-rule="evenodd"
				d="M3 7a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 13a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
				clip-rule="evenodd"></path>
		</svg>
	</button>
</header>

<style>
	header {
		@apply relative z-50 mb-28 flex items-center sm:pl-[4.5rem];

		.logo {
			@apply inline-flex items-center grayscale hover:filter-none sm:relative sm:inline-block;

			svg {
				@apply mr-3 h-10 w-6 sm:absolute sm:left-[-4.5rem] sm:mr-0 sm:h-20 sm:w-12;
			}

			> span {
				@apply text-xl font-bold sm:text-4xl;
			}
		}

		#toggle-navigation-menu {
			@apply ml-8 sm:invisible sm:hidden;

			svg {
				@apply h-6 w-6;
			}
		}

		nav {
			@apply mt-1 -ml-4 hidden text-accent sm:flex sm:divide-x sm:divide-dashed sm:divide-accent;

			a {
				@apply px-4 sm:text-lg sm:hover:underline;
			}
		}

		@media (max-width: 640px) {
			:global(body.menu-open) & {
				@apply relative z-50;

				nav {
					@apply absolute -inset-x-4 top-14 m-0 flex flex-col items-end gap-y-4 rounded-md bg-[color:var(--theme-menu-bg)] py-4 shadow backdrop-blur backdrop-filter;

					a {
						@apply p-4;
					}
				}
			}
		}
	}
</style>
